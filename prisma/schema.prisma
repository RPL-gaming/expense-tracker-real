generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id           String        @id @default(cuid())
  email        String?       @unique
  password     String
  username     String        @unique
  budget       Budget?
  expenses     Expense[]
  appointments Appointment[]
  transactions Transaction[]

  @@map("users")
}

model Expense {
  id          Int      @id @default(autoincrement())
  amount      Float
  date        DateTime
  category    String
  description String?
  userId      String
  user        User     @relation(fields: [userId], references: [id])
}

model Budget {
  id     Int      @id @default(autoincrement())
  amount Float
  userId String   @unique
  date   DateTime
  users  User     @relation(fields: [userId], references: [id])
}

model FinancialAdvisor {
  id                 Int           @id @default(autoincrement())
  name               String
  specialties        String[]
  email              String        @unique
  ratePerHour        Float
  appointments       Appointment[]
  availableSchedules Schedule[]
  transactions       Transaction[]
}

model Appointment {
  id        Int              @id @default(autoincrement())
  date      DateTime
  time      DateTime
  userId    String
  advisorId Int
  advisor   FinancialAdvisor @relation(fields: [advisorId], references: [id])
  user      User             @relation(fields: [userId], references: [id])
}

model Schedule {
  id        Int              @id @default(autoincrement())
  date      DateTime
  time      DateTime
  advisorId Int
  advisor   FinancialAdvisor @relation(fields: [advisorId], references: [id])
}

model Transaction {
  id        Int              @id @default(autoincrement())
  amount    Float
  status    String
  userId    String
  advisorId Int
  advisor   FinancialAdvisor @relation(fields: [advisorId], references: [id])
  user      User             @relation(fields: [userId], references: [id])
}
